# Please refer to the table below to check envoy and consul
# compatibility:
#   - https://www.consul.io/docs/connect/proxies/envoy

targets=(
  "centos"
  "ubuntu"
)
pkgname="service-discover-base"
pkgver="1.10.10"
pkgrel="1"
pkgdesc="Service discover binary, based on HashiCorp Consul"
pkgdesclong=(
  "Service discover binary, based on HashiCorp Consul"
)
maintainer="Zextras <packages@zextras.com>"
arch="amd64"
license=("MPL-2.0")
section="meta-package"
priority="optional"
url="https://www.zextras.com/"
conflicts=("consul")
sources=(
  "https://releases.hashicorp.com/consul/${pkgver}/consul_${pkgver}_linux_amd64.zip"
)

# manually update hash from https://releases.hashicorp.com/consul/${pkgver}/consul_${pkgver}_SHA256SUMS
hashsums=(
  "5bb7642db502fe280e0353c13b981d62720b2dd2abe249f6083a92f0c8f69235"
)

package() {
  cd "${srcdir}"
  install -D consul -m 0755 "${pkgdir}/usr/bin/consul"
}

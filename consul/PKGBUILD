# Please refer to the table below to check envoy and consul
# compatibility:
#   - https://www.consul.io/docs/connect/proxies/envoy

targets=(
  "centos"
  "ubuntu"
)
pkgname="service-discover-base"
pkgver="1.10.10"
pkgrel="2"
pkgdesc="Service discover binary, based on HashiCorp Consul"
pkgdesclong=(
  "Service discover binary, based on HashiCorp Consul"
)
maintainer="Zextras <packages@zextras.com>"
arch="amd64"
license=("MPL-2.0")
section="meta-package"
priority="optional"
url="https://www.zextras.com/"
conflicts=("consul")
sources=(
  "https://releases.hashicorp.com/consul/1.10.4/consul_1.10.4_linux_amd64.zip"
)

# manually update hash from https://releases.hashicorp.com/consul/1.10.4/consul_${pkgver}_SHA256SUMS
hashsums=(
  "2be6414cdce1540c022acda76da55ef6bbd51c537dc2e3d4020652e72daec62d"
)

package() {
  cd "${srcdir}"
  install -D consul -m 0755 "${pkgdir}/usr/bin/consul"
}
